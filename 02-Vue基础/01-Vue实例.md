# 01-Vue实例

## 如何创建 Vue 实例
一个`Vue`应用是由一个通过`new Vue`创建的根Vue实例，以为可选的可嵌套可复用的组件树组成。换句话说，所有的Vue组件都是Vue实例，并且接受相同的选择对象。当一个Vue实例被创建时，对应的data对象啊会把所有的property加入到Vue的响应式系统中。 因此当这些property的值改变时，试图会产生相应来匹配更新的值。
```js
// 我们的数据对象
var data = { a: 1 }

// 该对象被加入到一个 Vue 实例中
var vm = new Vue({
  data: data
})

// 获得这个实例上的 property
// 返回源数据中对应的字段
vm.a == data.a // => true

// 设置 property 也会影响到原始数据
vm.a = 2
data.a // => 2

// ……反之亦然
data.a = 3
vm.a // => 3
```
Note： 只有实例被创建时就已经存在于data中的property才是响应式的，也就是说如果新加入一个property，那么对于这个property的改动不会触发任何视图的更新。如果要加可以触发更新的property，可以在最开始设置初始值。例如

```js
data: {
  newTodoText: '',
  visitCount: 0,
  hideCompletedTodos: false,
  todos: [],
  error: null
}
```

和其他主流前端架构一样，Vue也有自己的生命周期钩子, 常见的生命周期钩子函数以及作用如下：
- **beforeCreate**：在实例化的过程中，在实例创建之前，这个时候data和methods的属性都没有被初始化，所以我们不能访问这些属性。这个过程可以被用来加载插件或者进行全局配置，比如进行全局拦截器的注册
- **created**：在实例创建完成之后调用，这个时候data和methods的属性已经被初始化，所以我们可以访问这些属性，但是DOM还没有生成。这个阶段经常用于操作Ajax请求数据或者对于数据进行处理来进行一些初始化的操作
- **beforeMount**：在DOM挂在之前调用，这个时候已经在内存中编译成了render函数，但是还没有被渲染在页面上。这个步骤经常被用在操作DOM或者进行页面初始化，比如获取渲染后的DOM节点进行操作，或者手动修改虚拟DOM
- **mounted**： 在DOM挂载之后调用，此时实例已经生成对应的DOM元素，并完成了模板的渲染，可以进行一些需要使用DOM元素的操作，比如增添事件监听器，用于进行User Interface操作，比如初始化图表，增添事件等等
- **beforeUpdate**：在数据更新之前调用，这个时候页面还没有重新渲染，但是数据已经更新。这个阶段经常用于获取更新前的状态或者进行一些数据处理的操作，比如记录状态以便更新之后进行比较
- **updated**：在数据更新之后调用，此时页面已经重新渲染，可以进行一些需要使用DOM元素的操作，比如更新事件监听器，进行UI操作比如重新计算布局，更新DOM节点等等
- **beforeUnmount**：在实例销毁之前调用，这个时候实例还没有被销毁，可以进行一些清理工作过，比如清理定时器，取消事件监听器等等，用于进行资源的释放，比如取消订阅，关闭WebSocket
- **unmounted**：在实例销毁之后调用，这个时候实例已经被销毁，对应的dom元素也被已处于，这个通常用于资源释放的操作比如清理缓存，释放内存
![lifeCycleHook](./images/lifecycle.png)
